---
id: configuration-reference
title: Configuration Reference
sidebar_position: 13
---

# Configuration Reference

Complete reference for the `intent.yaml` configuration file that controls the CI/CD pipeline behavior.

## File Location

```
.github/tag_and_release/intent.yaml
```

## Configuration Schema

### Release Control

Controls whether releases are created and how versions are determined.

```yaml
release: true | false
level: auto | patch | minor | major
notes: "Release notes text or path to file"
```

#### `release`

**Type:** `boolean`  
**Required:** Yes  
**Default:** `false`

Enables or disables automatic release creation.

**Examples:**
```yaml
release: true   # Enable releases
release: false  # Disable releases
```

#### `level`

**Type:** `string`  
**Required:** Yes  
**Default:** `auto`  
**Options:** `auto`, `patch`, `minor`, `major`

Determines how the version number is incremented.

| Value | Behavior | Example |
|-------|----------|---------|
| `auto` | Detect from commit messages | `1.0.0` → `1.0.1` or `1.1.0` |
| `patch` | Increment patch version | `1.0.0` → `1.0.1` |
| `minor` | Increment minor version | `1.0.0` → `1.1.0` |
| `major` | Increment major version | `1.0.0` → `2.0.0` |

**Examples:**
```yaml
level: auto   # Automatic detection
level: patch  # Force patch increment
level: minor  # Force minor increment
level: major  # Force major increment
```

#### `notes`

**Type:** `string`  
**Required:** No  
**Default:** Auto-generated from commits

Release notes content or path to a file containing notes.

**Examples:**
```yaml
# Inline notes
notes: "Bug fixes and performance improvements"

# Multi-line notes
notes: |
  ## What's New
  - Feature A
  - Feature B
  
  ## Bug Fixes
  - Fixed issue X
  - Resolved problem Y

# Reference to file
notes: "file:.github/tag_and_release/release-notes.md"
```

### Artifact Management

Controls which artifacts are built and released.

```yaml
artifacts:
  python: auto | force | skip
  docker: auto | force | skip
  docs:
    mode: auto | force | skip
    sections:
      - docs
      - dev
    strategy: always | changed
```

#### `artifacts.python`

**Type:** `string`  
**Required:** No  
**Default:** `auto`  
**Options:** `auto`, `force`, `skip`

Controls Python package release.

| Value | Behavior |
|-------|----------|
| `auto` | Release if Python files changed |
| `force` | Always release Python package |
| `skip` | Never release Python package |

**Examples:**
```yaml
artifacts:
  python: auto   # Automatic detection
  python: force  # Always release
  python: skip   # Never release
```

#### `artifacts.docker`

**Type:** `string`  
**Required:** No  
**Default:** `auto`  
**Options:** `auto`, `force`, `skip`

Controls Docker image release.

| Value | Behavior |
|-------|----------|
| `auto` | Release if Dockerfile or related files changed |
| `force` | Always build and push Docker images |
| `skip` | Never build Docker images |

**Examples:**
```yaml
artifacts:
  docker: auto   # Automatic detection
  docker: force  # Always build
  docker: skip   # Never build
```

#### `artifacts.docs`

**Type:** `object` or `string`  
**Required:** No  
**Default:** `auto`

Controls documentation versioning and deployment.

##### Enhanced Format (Recommended)

```yaml
artifacts:
  docs:
    mode: auto | force | skip
    sections:
      - docs
      - dev
      - api
    strategy: always | changed
```

**Fields:**

- **`mode`** - When to version documentation
  - `auto` - Version if docs changed
  - `force` - Always version
  - `skip` - Never version

- **`sections`** - Array of Docusaurus plugin IDs to version
  - List of documentation sections
  - Must match plugin IDs in `docusaurus.config.ts`

- **`strategy`** - Which sections to version
  - `always` - Version all sections
  - `changed` - Only version sections with changes

**Examples:**
```yaml
# Version all sections on every release
artifacts:
  docs:
    mode: auto
    sections:
      - docs
      - dev
    strategy: always

# Only version changed sections
artifacts:
  docs:
    mode: auto
    sections:
      - docs
      - dev
      - api
    strategy: changed

# Force versioning regardless of changes
artifacts:
  docs:
    mode: force
    sections:
      - docs
    strategy: always
```

##### Legacy Format (Still Supported)

```yaml
artifacts:
  docs: auto | force | skip
```

Simple string value for backward compatibility.

### Project Configuration

Project-specific settings.

```yaml
project:
  name: "Project Name"
  package_name: "package_name"
  base_branch: "master"
```

#### `project.name`

**Type:** `string`  
**Required:** No  
**Default:** Repository name

Display name for the project.

**Examples:**
```yaml
project:
  name: "GitHub Action Reusable Workflows"
  name: "My Custom Project"
  name: ~  # Use repository name
```

#### `project.package_name`

**Type:** `string`  
**Required:** No  
**Default:** Repository name (sanitized)

Python package name for PyPI releases.

**Examples:**
```yaml
project:
  package_name: "github_action_workflows"
  package_name: "my_package"
  package_name: ~  # Use repository name
```

#### `project.base_branch`

**Type:** `string`  
**Required:** No  
**Default:** `master`

Main development branch name.

**Examples:**
```yaml
project:
  base_branch: "master"
  base_branch: "main"
  base_branch: "develop"
```

### Python Package Configuration

Settings for Python package releases to PyPI.

```yaml
python:
  auth_method: oidc | token
```

#### `python.auth_method`

**Type:** `string`  
**Required:** No  
**Default:** `token`  
**Options:** `oidc`, `token`

Authentication method for PyPI uploads.

| Method | Description | Security | Setup |
|--------|-------------|----------|-------|
| `oidc` | OpenID Connect (Trusted Publisher) | High | Configure on PyPI |
| `token` | API Token | Medium | Add secret to GitHub |

**OIDC (Recommended):**
```yaml
python:
  auth_method: oidc
```

**Benefits:**
- No secrets to manage
- More secure
- Automatic token rotation
- Scoped permissions

**Setup:**
1. Go to PyPI project settings
2. Add GitHub as trusted publisher
3. Configure repository and workflow

**Token-Based:**
```yaml
python:
  auth_method: token
```

**Requirements:**
- `PYPI_API_TOKEN` secret in GitHub
- Token from PyPI account settings

### Git Configuration

Settings for Git operations during CI/CD.

```yaml
git:
  commit:
    name: "GitHub Actions Bot"
    email: "actions@github.com"
```

#### `git.commit.name`

**Type:** `string`  
**Required:** No  
**Default:** `"GitHub Actions Bot"`

Git commit author name for automated commits.

**Examples:**
```yaml
git:
  commit:
    name: "GitHub Actions Bot"
    name: "CI Bot"
    name: "Release Automation"
```

#### `git.commit.email`

**Type:** `string`  
**Required:** No  
**Default:** `"actions@github.com"`

Git commit author email for automated commits.

**Examples:**
```yaml
git:
  commit:
    email: "actions@github.com"
    email: "ci@example.com"
    email: "bot@myproject.org"
```

### Docker Configuration

Settings for Docker image builds and deployments.

```yaml
docker:
  registries:
    dockerhub: "docker.io"
    ghcr: "ghcr.io"
  health_check:
    port: 8000
    path: "/health"
  run_options: "-e VAR=value -p 8000:8000"
```

#### `docker.registries`

**Type:** `object`  
**Required:** No  
**Default:** See below

Docker registry URLs for image publishing.

**Default Values:**
```yaml
docker:
  registries:
    dockerhub: "docker.io"
    ghcr: "ghcr.io"
```

**Examples:**
```yaml
# Use both registries
docker:
  registries:
    dockerhub: "docker.io"
    ghcr: "ghcr.io"

# Custom registry
docker:
  registries:
    dockerhub: "docker.io"
    custom: "registry.example.com"

# Only GitHub Container Registry
docker:
  registries:
    ghcr: "ghcr.io"
```

#### `docker.health_check`

**Type:** `object`  
**Required:** No  
**Default:** See below

Health check configuration for container testing.

**Fields:**
- `port` - Port number for health checks
- `path` - HTTP path for health endpoint

**Default Values:**
```yaml
docker:
  health_check:
    port: 8000
    path: "/health"
```

**Examples:**
```yaml
# Web application
docker:
  health_check:
    port: 3000
    path: "/api/health"

# Custom service
docker:
  health_check:
    port: 9090
    path: "/healthz"
```

#### `docker.run_options`

**Type:** `string`  
**Required:** No  
**Default:** `""`

Additional Docker run options for container testing.

**Examples:**
```yaml
# Environment variables
docker:
  run_options: "-e API_TOKEN=test_token -e DEBUG=true"

# Port mapping and environment
docker:
  run_options: "-p 8080:8080 -e NODE_ENV=production"

# Volume mounts
docker:
  run_options: "-v /data:/app/data -e CONFIG_PATH=/app/data/config.yml"

# Network configuration
docker:
  run_options: "--network=host -e REDIS_HOST=localhost"

# Multiple options
docker:
  run_options: "-e VAR1=value1 -e VAR2=value2 -p 8000:8000 -v /tmp:/tmp"
```

### Validation Configuration

Settings for validation and testing releases.

```yaml
validation:
  version: "1.0.0-validation"
  test_version: "validation-test"
```

#### `validation.version`

**Type:** `string`  
**Required:** No  
**Default:** `"1.0.0-validation"`

Version tag used for validation releases.

**Examples:**
```yaml
validation:
  version: "1.0.0-validation"
  version: "0.0.0-test"
  version: "validation"
```

#### `validation.test_version`

**Type:** `string`  
**Required:** No  
**Default:** `"validation-test"`

Version tag used for validation testing.

**Examples:**
```yaml
validation:
  test_version: "validation-test"
  test_version: "test"
  test_version: "ci-test"
```

### Documentation Configuration

Additional documentation-related settings.

```yaml
docs:
  paths:
    ci_cd: "docs/CI_CD.md"
    installation: "docs/INSTALLATION.md"
    readme: "README.md"
  preview:
    branch: "docs-preview"
```

#### `docs.paths`

**Type:** `object`  
**Required:** No  
**Default:** See below

Paths to important documentation files.

**Fields:**
- `ci_cd` - CI/CD documentation path
- `installation` - Installation guide path
- `readme` - Main README file path

**Default Values:**
```yaml
docs:
  paths:
    ci_cd: "docs/CI_CD.md"
    installation: "docs/INSTALLATION.md"
    readme: "README.md"
```

**Examples:**
```yaml
# Custom paths
docs:
  paths:
    ci_cd: "documentation/cicd.md"
    installation: "docs/getting-started.md"
    readme: "README.md"

# Different structure
docs:
  paths:
    ci_cd: "wiki/CI-CD.md"
    installation: "wiki/Installation.md"
    readme: "docs/README.md"
```

#### `docs.preview`

**Type:** `object`  
**Required:** No  
**Default:** See below

Settings for documentation preview deployments.

**Fields:**
- `branch` - Branch name for preview deployments

**Default Values:**
```yaml
docs:
  preview:
    branch: "docs-preview"
```

**Examples:**
```yaml
# Custom preview branch
docs:
  preview:
    branch: "docs-preview"
    branch: "preview"
    branch: "staging-docs"
```

## Complete Example

Here's a complete `intent.yaml` with all options:

```yaml
# Release Control
release: true
level: auto
notes: |
  ## What's New
  - Added multi-section documentation versioning
  - Improved Docker health check configuration
  
  ## Bug Fixes
  - Fixed release branch creation
  - Resolved documentation deployment issues

# Artifact Management
artifacts:
  python: auto
  docker: auto
  docs:
    mode: auto
    sections:
      - docs
      - dev
    strategy: always

# Project Configuration
project:
  name: "GitHub Action Reusable Workflows"
  package_name: "github_action_workflows"
  base_branch: "master"

# Python Package Configuration
python:
  auth_method: oidc

# Git Configuration
git:
  commit:
    name: "GitHub Actions Bot"
    email: "actions@github.com"

# Docker Configuration
docker:
  registries:
    dockerhub: "docker.io"
    ghcr: "ghcr.io"
  health_check:
    port: 8000
    path: "/health"
  run_options: "-e API_TOKEN=test_token -e DEBUG=true -p 8000:8000"

# Validation Configuration
validation:
  version: "1.0.0-validation"
  test_version: "validation-test"

# Documentation Configuration
docs:
  paths:
    ci_cd: "docs/CI_CD.md"
    installation: "docs/INSTALLATION.md"
    readme: "README.md"
  preview:
    branch: "docs-preview"
```

## Minimal Example

Minimal configuration for basic releases:

```yaml
release: true
level: auto
```

This uses all default values for other settings.

## Common Configurations

### Python Package Project

```yaml
release: true
level: auto
artifacts:
  python: auto
  docker: skip
  docs: auto
python:
  auth_method: oidc
```

### Docker Project

```yaml
release: true
level: auto
artifacts:
  python: skip
  docker: auto
  docs: auto
docker:
  registries:
    dockerhub: "docker.io"
    ghcr: "ghcr.io"
  health_check:
    port: 8080
    path: "/health"
```

### Documentation-Only Project

```yaml
release: true
level: patch
artifacts:
  python: skip
  docker: skip
  docs:
    mode: force
    sections:
      - docs
    strategy: always
```

### Multi-Artifact Project

```yaml
release: true
level: auto
artifacts:
  python: auto
  docker: auto
  docs:
    mode: auto
    sections:
      - docs
      - dev
      - api
    strategy: changed
python:
  auth_method: oidc
docker:
  registries:
    dockerhub: "docker.io"
    ghcr: "ghcr.io"
```

## Validation

The configuration file is validated against a JSON schema located at:
```
.github/tag_and_release/schema.json
```

Invalid configurations will cause the workflow to fail with descriptive error messages.

## Best Practices

1. **Use OIDC for Python Packages**
   - More secure than tokens
   - No secrets to manage
   - Automatic rotation

2. **Enable Automatic Version Detection**
   - Use `level: auto` with conventional commits
   - Reduces manual configuration
   - Follows semantic versioning

3. **Configure Documentation Versioning**
   - Use `strategy: changed` for large projects
   - Version all sections for consistency
   - Keep documentation in sync with releases

4. **Customize Docker Options**
   - Add necessary environment variables
   - Configure health checks appropriately
   - Test locally before committing

5. **Document Release Notes**
   - Write clear, informative notes
   - Include breaking changes
   - Reference issues and PRs

## Related Documentation

- [CI/CD Overview](./cicd-overview.mdx) - Complete CI/CD architecture
- [Release Management](./release-management.mdx) - Release process details
- [Documentation Pipeline](./documentation-pipeline.mdx) - Documentation workflow
- [Workflows Overview](./index.mdx) - All reusable workflows
